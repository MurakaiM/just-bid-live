function Table(t,e){function a(t){let e=`<tr>`;return Object.values(t).forEach(t=>e+=`<td>${t}</td>`),e+=`</tr>`,$(e)}function s(t,e,a){t.sort((t,s)=>{var r=t[e],i=s[e];return a?r<i?-1:r>i?1:0:r>i?-1:r<i?1:0})}this.table=$("#"+t),this.tbody=this.table.find("tbody"),this.tpagins=[],this.tactive,this.maxPages,this.forPage=10,this.currentPage,this.currentRow,this.currentSortableId=null,this.currentSortableBool=null,this.currentSortableHeader=null,this.data={current:[]},this.searched=null,this.createSortable=(t=>{var a=t.data("field");a==e.defaultSort&&(t.addClass("down"),this.currentSortableId=a,this.currentSortableHeader=t,this.currentSortableBool=!1),t.append($(`\n        <div class="arrows">\n            <i class="chevron up icon"></i>\n            <i class="chevron down icon"></i>\n        </div>`)),t.click(e=>{this.currentSortableId==a?(this.currentSortableBool=!this.currentSortableBool,this.sortBy(a,this.currentSortableBool),this.currentSortableHeader.removeClass("up down"),this.currentSortableBool?this.currentSortableHeader.addClass("up"):this.currentSortableHeader.addClass("down")):(this.currentSortableHeader&&this.currentSortableHeader.removeClass("up down"),this.currentSortableHeader=t,this.currentSortableHeader.addClass("down"),this.currentSortableId=a,this.currentSortableBool=!1,this.sortBy(a,!1))})}),this.forceDelete=(()=>{this.searched=null,this.data.current=[],this.forPage=10,this.forceClearSortable()}),this.forceClearSortable=(()=>{this.currentSortableHeader.removeClass("up down"),this.currentSortableId=e.defaultSort,this.currentSortableBool=!1,this.currentSortableHeader=$(`.ui.table thead th[data-field="${e.defaultSort}"]`),this.currentSortableHeader.addClass("down")}),this.forceLoad=(t=>{this.searched=null,this.data.current=[],this.forPage=10,this.loadData(t),this.pagination(1)}),this.forceRow=(t=>{this.data.current.unshift(t),this.sortBy(e.defaultSort),this.forceLoad(this.data.current)}),this.forceChange=((t,a)=>{this.data.current[t]=a,this.sortBy(e.defaultSort),this.forceLoad(this.data.current)}),this.redraw=(()=>this.pagination(this.currentPage)),this.changeFor=(t=>{this.forPage=parseInt(t),this.recalculatePages(),this.displayPage(this.currentPage,this.searched?this.searched:this.data.current),$(e.input.to).val(this.currentPage)}),this.loadData=(t=>{this.data.current=t,this.recalculatePages()}),this.recalculatePages=(()=>{var t=this.searched?this.searched.length:this.data.current.length;this.maxPages=Math.ceil(t/this.forPage),this.currentPage>this.maxPage&&(this.currentPage=this.maxPage)}),this.displayPage=((t,s=this.data.current)=>{if(t>this.maxPages&&(t=this.maxPages),this.tbody.empty(),e.onFocusLost&&e.onFocusLost(),0!=s.length){for(let r=(t-1)*this.forPage;r<t*this.forPage;r++)if(s[r]){const t=e.row?e.row(s[r]):a(s[r]);t.click(a=>{this.currentRow&&this.currentRow.removeClass("selected"),t.addClass("selected"),e.click(r,t,s),this.currentRow=t}),this.tbody.append(t)}}else this.tbody.append(`<tr> <td colspan="10"> <div class="emptypage"> There are no records </div> </td> </tr>`);this.currentPage=t}),this.sortBy=((t,e=!1)=>{this.searched?(s(this.searched,t,e),this.displayPage(this.currentPage,this.searched)):(s(this.data.current,t,e),this.displayPage(this.currentPage))}),this.disableSort=(()=>{this.sortBy(e.defaultSort),this.recalculatePages(),this.displayPage(this.currentPage,this.searched?this.searched:this.data.current)}),this.search=(t=>{this.searched=null,this.searched=[],this.searched=this.data.current.filter(e=>Object.keys(e).some(a=>"createdAt"==a||"updatedAt"==a?new Date(e[a]).toLocaleDateString().toLowerCase().indexOf(t)>-1:String(e[a]).toLowerCase().indexOf(t)>-1)),this.sortBy(this.currentSortableId,this.currentSortableBool),this.recalculatePages(),this.displayPage(1,this.searched)}),this.disableSearch=(()=>{this.searched=null,this.recalculatePages(),this.displayPage(1),this.currentSortableHeader.removeClass("up down"),this.currentSortableId=null,this.currentSortableBool=null}),this.pagination=(t=>{t<=0?t=1:t>this.maxPages&&(t=this.maxPages),this.currentPage=t,this.searched?this.displayPage(t,this.searched):this.displayPage(t,this.data.current),$(e.input.to).val(t)}),this.bNext=(()=>{this.currentPage=this.currentPage+1,this.pagination(this.currentPage)}),this.bPrevious=(()=>{this.currentPage=this.currentPage-1,this.pagination(this.currentPage)}),this.setUpUi=(()=>{$(e.search).on("change keyup",t=>{0==t.target.value.length?this.disableSearch():this.search(t.target.value)}),$(e.forPage).dropdown("set selected",10),$(e.forPage).dropdown({onChange:()=>this.changeFor($(e.forPage).dropdown("get value"))}),$(e.buttons.next).click(t=>this.bNext()),$(e.buttons.previous).click(t=>this.bPrevious());const t=$(e.input.to);$(e.buttons.to).click(e=>{let a=parseInt(t.val());isNaN(a)&&(a=1),this.pagination(a)}),this.table.find("thead th").each((t,e)=>this.createSortable($(e)))}),this.loadInSegment=((t,e,a,s)=>{this.hashed={url:t,head:e,segment:a},LoadSegment(t,e,a).then(t=>{console.log(t),a.toggleClass("loading"),this.forceLoad(t.result.data)})}),this.loadFromCache=(()=>{this.forceClearSortable(),LoadSegment(this.hashed.url,this.hashed.head,this.hashed.segment).then(t=>{this.hashed.segment.toggleClass("loading"),this.forceLoad(t.result.data)})}),this.setUpUi(),this.hashed}function NestedList(t,e){this.body=$(t),this.place=this.body.find(e.listplace),this.submiter=this.body.find(e.submiter),this.result={},this.current=0,this.validate=(()=>{let t={},a=!0;return e.inputs.forEach(e=>{let s=$(this.body.find(`input[name=${e.name}]`)),r=s.parent();e.valid(s.val())?(r.removeClass("error"),t[e.as?e.as:e.name]=s.val()):(r.addClass("error"),a=!1)}),1==a&&e.inputs.forEach(t=>$(this.body.find(`input[name=${t.name}]`).val(""))),{valid:a,data:t}}),this.submiter.click(t=>{const a=this.validate();a.valid&&(this.result[a.data.title+a.data.value]||(this.place.append(e.mockuper(a.data,a.data.title+a.data.value)),this.result[a.data.value]=a.data))}),this.getData=(()=>this.result),this.forceDelete=(t=>delete this.result[t]),this.forceEmpty=(()=>{this.result={},this.place.empty()})}