"use strict";!function(e,o,t,n){e.fn.video=function(t){var n,i=e(this),a=i.selector||"",r=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,s=[].slice.call(arguments,1);o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||o.msRequestAnimationFrame;return i.each(function(){var d,m=e.isPlainObject(t)?e.extend(!0,{},e.fn.video.settings,t):e.extend({},e.fn.video.settings),p=m.selector,f=m.className,v=m.error,g=m.metadata,h=m.namespace,b=m.templates,y="."+h,w="module-"+h,x=(e(o),e(this)),F=x.find(p.placeholder),C=x.find(p.playButton),E=x.find(p.embed),A=this,P=x.data(w);d={initialize:function(){d.debug("Initializing video"),d.create(),x.on("click"+y,p.placeholder,d.play).on("click"+y,p.playButton,d.play),d.instantiate()},instantiate:function(){d.verbose("Storing instance of module",d),P=d,x.data(w,d)},create:function(){var e=x.data(g.image),o=b.video(e);x.html(o),d.refresh(),e||d.play(),d.debug("Creating html for video element",o)},destroy:function(){d.verbose("Destroying previous instance of video"),d.reset(),x.removeData(w).off(y)},refresh:function(){d.verbose("Refreshing selector cache"),F=x.find(p.placeholder),C=x.find(p.playButton),E=x.find(p.embed)},change:function(e,o,t){d.debug("Changing video to ",e,o,t),x.data(g.source,e).data(g.id,o).data(g.url,t),m.onChange()},reset:function(){d.debug("Clearing video embed and showing placeholder"),x.removeClass(f.active),E.html(" "),F.show(),m.onReset()},play:function(){d.debug("Playing video");var e=x.data(g.source)||!1,o=x.data(g.url)||!1,t=x.data(g.id)||!1;E.html(d.generate.html(e,t,o)),x.addClass(f.active),m.onPlay()},get:{source:function(e){return"string"==typeof e&&(-1!==e.search("youtube.com")?"youtube":-1!==e.search("vimeo.com")&&"vimeo")},id:function(e){return e.match(m.regExp.youtube)?e.match(m.regExp.youtube)[1]:!!e.match(m.regExp.vimeo)&&e.match(m.regExp.vimeo)[2]}},generate:{html:function(e,o,t){d.debug("Generating embed html");var n;return e=e||m.source,o=o||m.id,e&&o||t?(e&&o||(e=d.get.source(t),o=d.get.id(t)),"vimeo"==e?n='<iframe src="//player.vimeo.com/video/'+o+"?="+d.generate.url(e)+'" width="100%" height="100%" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>':"youtube"==e&&(n='<iframe src="//www.youtube.com/embed/'+o+"?="+d.generate.url(e)+'" width="100%" height="100%" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>')):d.error(v.noVideo),n},url:function(e){var o=m.api?1:0,t="auto"===m.autoplay?void 0!==x.data("image"):m.autoplay,n=m.hd?1:0,i=m.showUI?1:0,a=m.showUI?0:1,r="";return"vimeo"==e&&(r="api="+o+"&amp;title="+i+"&amp;byline="+i+"&amp;portrait="+i+"&amp;autoplay="+t,m.color&&(r+="&amp;color="+m.color)),"ustream"==e?(r="autoplay="+t,m.color&&(r+="&amp;color="+m.color)):"youtube"==e&&(r="enablejsapi="+o+"&amp;autoplay="+t+"&amp;autohide="+a+"&amp;hq="+n+"&amp;modestbranding=1",m.color&&(r+="&amp;color="+m.color)),r}},setting:function(o,t){if(d.debug("Changing setting",o,t),e.isPlainObject(o))e.extend(!0,m,o);else{if(void 0===t)return m[o];m[o]=t}},internal:function(o,t){if(e.isPlainObject(o))e.extend(!0,d,o);else{if(void 0===t)return d[o];d[o]=t}},debug:function(){m.debug&&(m.performance?d.performance.log(arguments):(d.debug=Function.prototype.bind.call(console.info,console,m.name+":"),d.debug.apply(console,arguments)))},verbose:function(){m.verbose&&m.debug&&(m.performance?d.performance.log(arguments):(d.verbose=Function.prototype.bind.call(console.info,console,m.name+":"),d.verbose.apply(console,arguments)))},error:function(){d.error=Function.prototype.bind.call(console.error,console,m.name+":"),d.error.apply(console,arguments)},performance:{log:function(e){var o,t;m.performance&&(t=(o=(new Date).getTime())-(r||o),r=o,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:A,"Execution Time":t})),clearTimeout(d.performance.timer),d.performance.timer=setTimeout(d.performance.display,500)},display:function(){var o=m.name+":",t=0;r=!1,clearTimeout(d.performance.timer),e.each(l,function(e,o){t+=o["Execution Time"]}),o+=" "+t+"ms",a&&(o+=" '"+a+"'"),i.length>1&&(o+=" ("+i.length+")"),(void 0!==console.group||void 0!==console.table)&&l.length>0&&(console.groupCollapsed(o),console.table?console.table(l):e.each(l,function(e,o){console.log(o.Name+": "+o["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(o,t,i){var a,r,l,c=P;return t=t||s,i=A||i,"string"==typeof o&&void 0!==c&&(o=o.split(/[\. ]/),a=o.length-1,e.each(o,function(t,n){var i=t!=a?n+o[t+1].charAt(0).toUpperCase()+o[t+1].slice(1):o;if(e.isPlainObject(c[i])&&t!=a)c=c[i];else{if(void 0!==c[i])return r=c[i],!1;if(!e.isPlainObject(c[n])||t==a)return void 0!==c[n]?(r=c[n],!1):(d.error(v.method,o),!1);c=c[n]}})),e.isFunction(r)?l=r.apply(i,t):void 0!==r&&(l=r),e.isArray(n)?n.push(l):void 0!==n?n=[n,l]:void 0!==l&&(n=l),r}},u?(void 0===P&&d.initialize(),d.invoke(c)):(void 0!==P&&P.invoke("destroy"),d.initialize())}),void 0!==n?n:this},e.fn.video.settings={name:"Video",namespace:"video",debug:!1,verbose:!1,performance:!0,metadata:{id:"id",image:"image",source:"source",url:"url"},source:!1,url:!1,id:!1,aspectRatio:16/9,onPlay:function(){},onReset:function(){},onChange:function(){},onPause:function(){},onStop:function(){},width:"auto",height:"auto",autoplay:"auto",color:"#442359",hd:!0,showUI:!1,api:!0,regExp:{youtube:/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,vimeo:/http:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/},error:{noVideo:"No video specified",method:"The method you called is not defined"},className:{active:"active"},selector:{embed:".embed",placeholder:".placeholder",playButton:".play"}},e.fn.video.settings.templates={video:function(e){var o="";return e&&(o+='<i class="video play icon"></i><img class="placeholder" src="'+e+'">'),o+='<div class="embed"></div>'}}}(jQuery,window,document);