"use strict";function setUpElements(e){var t=Stripe(e),r=t.elements().create("card",{style:{base:{iconColor:"#a5a4a4",color:"rgba(0, 0, 0, 0.87)",lineHeight:"38px",fontWeight:300,fontFamily:'"Work Sans", sans-serif',fontSize:"1em","::placeholder":{color:"#cecece"}}}});r.mount("#card-element");var n=document.getElementById("payment-form"),i={colors:{identifier:"color",rules:[{type:"empty",prompt:"Please choose available color"}]},firstName:{identifier:"shipping[first-name]",rules:[{type:"empty",prompt:"Please enter your first name"}]},lastName:{identifier:"shipping[last-name]",rules:[{type:"empty",prompt:"Please enter your last name"}]},address:{identifier:"shipping[address]",rules:[{type:"empty",prompt:"Please enter your shipping address."}]},city:{identifier:"shipping[city]",rules:[{type:"empty",prompt:"Please enter city"}]},code:{identifier:"shipping[code]",rules:[{type:"empty",prompt:"Please enter ZIP(postal) code"}]},country:{identifier:"shipping[country]",rules:[{type:"empty",prompt:"Please select your country"}]},phone:{identifier:"phone",rules:[{type:"phone",prompt:"Please enter valid phone"}]}};$("#sizes")&&(i.size={identifier:"size",rules:[{type:"empty",prompt:"Please choose availavle size"}]});var o=$(n).form({on:"blur",inline:!0,fields:i}),s=o.find(".ui.error p");n.addEventListener("submit",function(e){e.preventDefault(),o.form("is valid")&&(o.removeClass("error"),o.addClass("loading"),t.createSource(r).then(function(e){if(e.error)return o.removeClass("loading"),o.addClass("error"),void s.text(error.message);!function(e){var t=[document.createElement("input"),document.createElement("input")];t[0].setAttribute("type","hidden"),t[0].setAttribute("name","stripeSource"),t[0].setAttribute("value",e.id),t[1].setAttribute("type","hidden"),t[1].setAttribute("name","stripeSecure"),t[1].setAttribute("value",e.card.three_d_secure),t.forEach(function(e){return n.append(e)}),n.submit()}(e.source)}).catch(function(e){o.removeClass("loading"),o.addClass("error"),s.text(e.message)}))})}function setUpSelection(e){POST("/user/product/type",{id:e}).then(function(e){return setUpByData($("#payment-form"),e.data)}).catch(function(e){return console.log(e)})}function setUpByData(e,t){var r={};t.forEach(function(e){return r[e.typeId]=e.inStock}),selection(r),e.removeClass("loading")}function selection(e){function t(t,r){Object.keys(e).forEach(function(n){return n.indexOf(t)>-1?function(t,r,n){if(!(e[t]>0)){var i=t.replace(r,"").replace("|","");n.find('.item.available[data-value="'+i+'"]').addClass("disabled")}}(n,t,r):null})}var r=$("#colors"),n=$("#sizes"),i=$(".ui.text.shape").shape();if(console.log(e),n){var o=$(r.find(".item")[0]).data("value");n.dropdown(),r.dropdown("set selected",o),r.dropdown({onChange:function(e){return function(e,r){i.shape("set next side","#"+e).shape("flip over"),n.dropdown("clear"),r.find(".item.available").removeClass("disabled"),t(e,r)}(e,n)}}),t(o,n)}else r.find(".item").each(function(e,t){return doneColor(t,r)})}function doneColor(e,t){0==t[(e=$(e)).attr("value")]&&e.addClass("disabled")}$(function(e){return $(".ui.fluid.search.selection.dropdown").dropdown()});