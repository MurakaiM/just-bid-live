function Cart(a){var t={},i=$("#shoppingCart"),e=$("#shoppingOverall"),s=a.find(".label"),n=i.find(".content"),l=i.find(".submit"),d=i.find(".empty");return this.show=(()=>{this.loadUidData(this.getFromCart()),i.modal("show")}),this.close=(()=>i.modal("hide")),this.loadJsonData=(a=>{d.addClass("none"),l.removeClass("disabled"),Object.keys(a).forEach((i,e)=>{var s=new Product(a[i]);t[i]=s,n.append(s.getDom())}),this.forceChanges()}),this.loadUidData=(a=>{n.addClass("loading"),l.addClass("loading");let t=[];Object.keys(a).forEach(i=>t.push(a[i].id)),POST("/user/orders/cart",{cart:t}).then(a=>{console.log(a),loadJsonData(a.data),n.removeClass("loading"),l.removeClass("loading")}).catch(a=>{console.log(a),n.removeClass("loading"),l.addClass("disabled")})}),this.forceChanges=(()=>{var a=0;Object.keys(t).forEach((i,e)=>a+=parseFloat(t[i].getTotal())),e.text(a.toFixed(2)),i.modal("refresh"),0==Object.keys(t).length&&(d.removeClass("none"),l.addClass("disabled"))}),this.removeById=(a=>{delete t[a],this.forceChanges()}),this.saveToCart=(a=>{var t;void 0===(t=null===localStorage.getItem("cart")?{}:JSON.parse(localStorage.getItem("cart")))[a.id]?t[a.id]=a:t[a.id].quantity=parseInt(t[a.id].quantity)+parseInt(a.quantity),localStorage.setItem("cart",JSON.stringify(t)),s.transition("jiggle"),this.setNumber(Object.keys(t).length)}),this.getFromCart=(()=>{return null===localStorage.getItem("cart")?[]:JSON.parse(localStorage.getItem("cart"))}),this.setNumber=(a=>{a<=0?s.addClass("hidden"):s.removeClass("hidden"),s.text(a)}),this}function Product(a){function t(){d.remove(),cart.removeById(l.id),cart.forceChanges()}function i(a){l.quantity=a<1?1:a>99?99:parseInt(a),o.val(l.quantity),s=parseFloat(l.quantity*l.cost).toFixed(2),n=parseFloat(l.quantity*l.cost+l.shipment).toFixed(2),r.text(s),c.text(n),cart.forceChanges()}var e,s,n,l=a,d=function(a){s=parseFloat(l.quantity*l.cost).toFixed(2),n=parseFloat(l.quantity*l.cost+l.shipment).toFixed(2);var t=`<div class="cart_item">\n      <div class="image">\n        <img src="${a.img_url}" alt="">\n       </div>\n      <div class="data">\n        <div class="title">${a.title}</div>\n        <div class="type">${a.type}</div>\n        <div class="seller">Seller :\n          <a href="${a.sellerLink}"> ${a.sellerName} </a>\n         </div>\n       </div>\n      <div class="quantity">\n        <i class="minus icon"></i>\n        <div class="ui input">\n          <input type="number" value="${l.quantity}" min="1" max="99">\n         </div>\n        <i class="plus icon"></i>\n       </div>\n      <div class="price">\n        <div class="cost">\n          <i class="fa fa-usd" aria-hidden="true"></i>\n          <span class="costSpan"> ${s} </span>\n         </div>\n        <div class="ship"> <i class="shipping icon"></i> Shipping :\n            <span>\n              +\n              <i class="fa fa-usd" aria-hidden="true"></i>\n              <span> ${a.shipment} </span>\n            </span>\n        </div>\n       </div>\n      <div class="ui fitted divider"></div>\n      <div class="total">\n          <i class="fa fa-usd" aria-hidden="true"></i> <span class="totalSpan"> ${n} </span>\n       </div>\n      <div class="item_remove"> <i class="remove icon"> </i> </div>\n     </div>`;return $(t)}(a),o=d.find("input"),r=d.find(".costSpan"),c=d.find(".totalSpan"),v=d.find(".minus"),u=d.find(".plus"),h=d.find(".item_remove");u.click(()=>i(l.quantity+1)),v.click(()=>i(l.quantity-1)),h.click(()=>t()),o.on("change keyup paste",()=>{var a=parseInt(o.val());clearTimeout(e),e=setTimeout(()=>{i(Number.isInteger(a)?a<1?1:a>99?99:a:l.quantity)},300)}),this.getTotal=(()=>n),this.getDom=(()=>d)}$(function(){var a=$("#mainCart");window.WCart=new Cart(a),a.click(a=>WCart.show())});