"use strict";function setUpElements(e){var t=Stripe(e),n=t.elements().create("card",{style:{base:{iconColor:"#a5a4a4",color:"rgba(0, 0, 0, 0.87)",lineHeight:"38px",fontWeight:300,fontFamily:'"Work Sans", sans-serif',fontSize:"1em","::placeholder":{color:"#cecece"}}}});n.mount("#card-element");var r=document.getElementById("payment-form"),i={colors:{identifier:"color",rules:[{type:"empty",prompt:"Please choose available color"}]},firstName:{identifier:"shipping[first-name]",rules:[{type:"empty",prompt:"Please enter your first name"}]},lastName:{identifier:"shipping[last-name]",rules:[{type:"empty",prompt:"Please enter your last name"}]},address:{identifier:"shipping[address]",rules:[{type:"empty",prompt:"Please enter your shipping address."}]},city:{identifier:"shipping[city]",rules:[{type:"empty",prompt:"Please enter city"}]},code:{identifier:"shipping[code]",rules:[{type:"empty",prompt:"Please enter ZIP(postal) code"}]},country:{identifier:"shipping[country]",rules:[{type:"empty",prompt:"Please select your country"}]},phone:{identifier:"phone",rules:[{type:"phone",prompt:"Please enter valid phone"}]}};$("#sizes")&&(i.size={identifier:"size",rules:[{type:"empty",prompt:"Please choose availavle size"}]});var o=$(r).form({on:"blur",inline:!0,fields:i}),a=o.find(".ui.error p");r.addEventListener("submit",function(e){e.preventDefault(),o.form("is valid")&&(o.removeClass("error"),o.addClass("loading"),t.createSource(n).then(function(e){return function(e){var t=[document.createElement("input"),document.createElement("input")];t[0].setAttribute("type","hidden"),t[0].setAttribute("name","stripeSource"),t[0].setAttribute("value",e.id),t[1].setAttribute("type","hidden"),t[1].setAttribute("name","stripeSecure"),t[1].setAttribute("value",e.card.three_d_secure),t.forEach(function(e){return r.append(e)}),r.submit()}(e)}).catch(function(e){o.removeClass("loading"),o.addClass("error"),a.text(e.message)}))})}function setUpSelection(e){POST("/user/product/type",{id:e}).then(function(e){return setUpByData($("#payment-form"),e.data)}).catch(function(e){return console.log(e)})}function setUpByData(e,t){var n={};t.forEach(function(e){return n[e.typeId]=e.inStock}),selection(n),e.removeClass("loading")}function selection(e){function t(t,n){Object.keys(e).forEach(function(r){return r.indexOf(t)>-1?function(t,n,r){if(!(e[t]>0)){var i=t.replace(n,"").replace("|","");r.find('.item.available[data-value="'+i+'"]').addClass("disabled")}}(r,t,n):null})}var n=$("#colors"),r=$("#sizes"),i=$(".ui.text.shape").shape();if(console.log(e),r){var o=$(n.find(".item")[0]).data("value");r.dropdown(),n.dropdown("set selected",o),n.dropdown({onChange:function(e){return function(e,n){i.shape("set next side","#"+e).shape("flip over"),r.dropdown("clear"),n.find(".item.available").removeClass("disabled"),t(e,n)}(e,r)}}),t(o,r)}else n.find(".item").each(function(e,t){return doneColor(t,n)})}function doneColor(e,t){0==t[(e=$(e)).attr("value")]&&e.addClass("disabled")}$(function(e){return $(".ui.fluid.search.selection.dropdown").dropdown()});